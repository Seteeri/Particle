The main issue is on an IN event, the head is cut off from the body.

Two solutions:
1. Manually save state, and wait for next IN event
   -> This is pretty much what a coroutine is!
2. Block and wait for data - BAD!
   -> Lowers throughput, inc latency


To implement #1, when event is triggered, call coroutine, if insufficient
data, yield, then try to read again

There exists at mosts one coroutine for each client

Writing entire msg at once will eliminate this case most of the time if buffer
is not full